<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./01.normal.css">
</head>
<body>
    <div id="app">

    </div>
    <script src="react/react.js"></script>
    <script src="react/react-dom.js"></script>
    <script src="react/babel.js"></script>
    <script type="text/babel">

    class TextAreaCounter extends React.Component {
      constructor() {
        super();
        this.state = {};
      }
        
      onTextChange(event) {
        this.setState({
          text: event.target.value
         })
      }
            
      componentDidUpdate(prevProps, prevState) {
        if(this.state.text.length > 5) {
          this.setState({
            text: prevState.text || this.props.text
          })
        }
      }

      render() {
        const text = 'text' in this.state ? this.state.text : this.props.text;
        return (
          <div>
            <textarea 
              value={text}
              onChange={event => this.onTextChange(event)}
            />
            <h3>{text.length}</h3>
          </div>
        )
      }
    }

    TextAreaCounter.defaultProps = {
      text: 'Count me as I type'
    }

    const myTextAreaCounter = ReactDOM.render(
      <TextAreaCounter text="Alex"/>,
      document.getElementById('app')
    )

    </script>
</body>
</html>